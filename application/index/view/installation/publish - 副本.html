<!--nav-->
{include file="public/header" }
<style>
	.btn-numbox {

		margin-top: 0px;
	}

	.btn-numbox li {
		float: left;
	}

	.btn-numbox li .number,
	.kucun {
		display: inline-block;
		font-size: 12px;
		color: #808080;
		vertical-align: sub;
	}

	.btn-numbox .count {
		overflow: hidden;
		margin: 0 16px 0 -20px;
	}

	.btn-numbox .count .num-jian,
	.input-num,
	.num-jia {
		display: inline-block;
		width: 28px;
		height: 32px;
		line-height: 28px;
		text-align: center;
		font-size: 18px;
		color: #999;
		cursor: pointer;
		border: 1px solid #e6e6e6;
	}

	.btn-numbox .count .num-jia {
		margin-left: 1px;
	}

	.btn-numbox .count .input-num {
		width: 58px;
		height: 32px;
		color: #333;
		border-left: 0;
		border-right: 0;

	}
	label{
		font-size: 10px;
	}
</style>
<link rel="stylesheet" type="text/css" href="__PUBLIC__static/admin/webupload/webuploader.css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__static/admin/webupload/style.css">
<style>
	.file-item{float: left; position: relative; width: 110px;height: 110px; margin: 0 20px 20px 0; }
	.file-item .info{overflow: hidden;}
	.uploader-list{width: 100%; overflow: hidden;}
	#imgPickers .webuploader-pick{
		background: #fff;
	}
</style>
<form id="demoa"  method="post" action="__PUBLIC__installation/placeorder" class="demoform">
 <input id="ds-sub" name="ds_step" hidden="hidden" value="">
	<!--main-->
	<div class="mt_md-130 install_order_details">
		<!--/*主题*/-->
		<div class="container pr-0 pl-0">
			<h5 class="page-header">
				<span class=pl-10>当前位置：</span>
				<small>安装下单页面详情</small>
				<span>>></span>
			</h5>
			<!--/*标题*/-->
			<div class="The-test-panel-head">
				<div class="pl-20">
					安装下单页面详情
				</div>
			</div>
			<div class="The-test-panel-body pl-0">
				<div class="dele1 pl-20 pr-10 mt-10">
					<!--服务类别-->
					<div class="row">
						<!--服务类别-->
						<div class="col-sm-6">
							<div class="form-group row">
								<label class="col-md-2 col-xs-4 mt-10">服务类别</label>
								<div class="col-md-6 col-xs-8">
									<input type="text" autocomplete="off" id="maintain" name=""  disabled  class="form-control" value="安装">
								</div>
							</div>
						</div>
						<!--品牌-->
						<div class="col-sm-6">
							<div class="form-group row">
								<label class="col-sm-2 col-xs-4 mt-10">品牌 <b class='text-orange xin'>*</b></label>
								<div class="col-sm-6 col-xs-8">
									<input type="text" autocomplete="off" lay-filte="brand"  lay-verify="brand|required" name="installation[brand]"  id="brand" class="form-control">
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<!--服务大类-->
						<div class="col-sm-6">
							<div class="row form-group">
								<label class="col-sm-2 col-xs-4 mt-10">商品大类 <b class='text-orange xin'>*</b></label>
								<div class="col-sm-6 col-xs-8">
									<select  pane class="form-control layui-form-pane"  name="installation[category]" lay-filter="product_categories" lay-verify="product_categories" id="product_categories" lai-ignore  id="product_categories">
										{foreach name="categories" item="category"}
										<option value="{$category.id}">{$category.name}</option> {/foreach}
									</select>
								</div>
							</div>
						</div>
						<div class="col-sm-6">
							<div class="row form-group">
								<label class="col-sm-2 col-xs-4 mt-10">服务小类 <b class='text-orange xin'>*</b></label>
								<div class="col-sm-6 col-xs-8">
									<div class="row">
										<div class="col-sm-6 col-xs-6">
											<select class="form-control" lay-filter="product_categories1"   lay-verify="product_categories1" lai-ignore name="installation[commodity]" id="product_categories1">{foreach name="commodities" item="commodity"}
												<option value="{$commodity.id}">{$commodity.name}</option> {/foreach}
											</select>
										</div>
										<div class="col-sm-6 col-xs-6">
											<select class="form-control " lay-filter="product_categories2" lay-verify="product_categories2" lai-ignore name="installation[commoditys]" id="product_categories2">
												{foreach name="goods" item="goods"}
												<option value="{$goods.id}">{$goods.name}</option> {/foreach}
											</select>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row pt-10">
						<div class="col-sm-2 col-xs-12 mt-10">
							<input type="checkbox" name="installation[pre_trans]" id="pre_trans" lay-filter="forward_delivery" lay-skin="primary" checked value="1" title="需先行发货">需先行发货
						</div>
						<div class="col-sm-6 col-xs-12">
							<div class="form-group row">
								<label class="col-sm-4 col-md-2  col-xs-12 mt-10" for="">提货地址 <b class='text-orange xin'>*</b></label>
								<div class="col-sm-8 col-md-10 col-xs-12" >
									<div id="" class="row">
										<div class="form-group col-xs-6 col-sm-6 col-md-4">
											<label class="sr-only" for="province"></label>
											<select  class="form-control"  id="province" name="installation[trans_address]" lay-verify="province" lay-filter="province" name="province">
												<option value="0">---省----</option>
											</select>
										</div>
										<div class="form-group col-xs-6 col-sm-6 col-md-4">
											<label class="sr-only" for="city"></label>
											<select   class="form-control" lay-filter="city" lay-verify="city" id="city" name="installation[trans_addressb]">
												<option value="0">---市----</option>
											</select>
										</div>
										<div class="form-group col-xs-6 col-sm-6 col-md-4">
											<label class="sr-only" for="district"></label>
											<select  name="installation[trans_addressa]"  class="form-control" lay-filter="district" lay-verify="district" id="district">
												<option value="0">---区----</option>
											</select>
										</div>
										<div class="form-group col-xs-12 col-md-12 col-sm-12">
											<input type="text" autocomplete="off" name="installation[trans_addressc]" class="form-control"  lay-verify="dizhi" id="dizhi" lay-filter="dizhi"   placeholder="请详细填写提货地址">
										</div>
									</div>
								</div>

							</div>
						</div>
					</div>
					<div class="row pt-10">
						<div class="col-sm-2 mb-10 col-xs-12  mt-10">
							<input type="checkbox" name="installation[pre_survey]" id="pre_survey" lay-skin="primary" lay-verify="pre_survey" lay-filter="pre_survey" value="0" title="是否有前置勘测单">是否有前置勘测单
						</div>
						<div class="col-xs-12  col-sm-6">
							<div class="form-group row">
								<label class="col-sm-2 col-xs-4 mt-10" for="">勘测单号 <b class='text-orange xin'>*</b></label>
								<div class="col-sm-8 col-xs-8">
									<input type="text" id="there_is_a_pre_survey" disabled lay-verify="there_is_a_pre_survey" lay-filter="there_is_a_pre_survey"  name="installation[pre_survey_num]" class="form-control">
								</div>

							</div>

						</div>
					</div>

				</div>
				<div class="border-bottom-1"></div>
				<div class="row k pl-20 pt-10">
					<div class="col-md-3 col-xs-12 col-sm-4">
						安装模式 <b class='text-orange xin'>*</b>
					</div>
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input type="radio" name="assistance_mode" lay-filter="Turnkey_mode" value="1"  title="全包模式" id="Turnkey_mode">全包模式
						</label>

					</div>
					<input type="hidden" lay-verify="ase" id="ase" name="installation[assistance_mode]" value="">
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input type="radio" name="assistance_mode" lay-filter="assistance_mode" value="0" id="assistance_mode" title="协助模式">协助模式
						</label>
					</div>
				</div>
				<div class="row k pl-20 pt-10">
					<div class="col-md-3  col-xs-12 col-sm-4">
						物流提货 <b class='text-orange xin'>*</b>
					</div>
					<input type="hidden" lay-verify="lse" id="lse" name="installation[special_delivery]" value="">
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input type="radio" lay-filter="carload_freight" value="1" id="less-l-carload_freight" name="special_delivery" title="零担">零担
						</label>

					</div>
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input type="radio" name="special_delivery" lay-filter="Special_delivery" value="0" id="Special_delivery" title="专车发货">专车发货
						</label>

					</div>
				</div>
				<div class="row k pl-20 pt-10">
					<div class="col-md-3 col-xs-12 col-sm-4">
						是否需要师傅自带板车 <b class='text-orange xin'>*</b>
					</div>
					<input type="hidden" lay-verify="sse" id="sse" name="installation[self_car]" value="">
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input id="s_shi" name="self_car" lay-filter="s_shi" value="1"  type="radio" title="是">是

						</label>
					</div>
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input id="s_fou" name="self_car" lay-filter="s_fou" value="0" type="radio" title="否">否

						</label>
					</div>
				</div>
				<div class="row k pl-20 pt-10">
					<div class="col-md-3 col-xs-12 col-sm-4">
						是否需要师傅
						代缴工程押金 <b class='text-orange xin'>*</b>
					</div>
					<input type="hidden" lay-verify="yse" id="yse" name="installation[self_deposit]" value="">
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input name="self_deposit" id="y_shi" lay-filter="y_shi" value="1" type="radio" title="是">是

						</label>
					</div>
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input name="self_deposit" id="y_fou" type="radio"  value="0" lay-filter="y_fou" title="否">否

						</label>
					</div>
				</div>

				<div class="border-bottom-1  mt-10"></div>
				<div class="row B">
					<div class="col-md-2 pl-30  col-xs-12 mt-90_sm mt-30_s col-sm-2 ">
						安装人员 <b class='text-orange xin'>*</b>
					</div>
					<div style="border-left: 1px solid #ddd " class="col-sm-10 col-xs-12 line-height-30">
						<div class="row mt-20 mb-20">
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10"  for="woodworking">
									木工 <b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">
									<input class="form-control" autocomplete="off" lay-verify="woodworking" name="installation[woodworking]" id="woodworking" placeholder="位" type="text">
								</div>
							</div>
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10" for="electrician">
									电工 <b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">
									<input class="form-control" autocomplete="off" lay-verify="electrician" id="electrician" name="installation[electrician]" placeholder="位" type="text">
								</div>
							</div>
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10" for="brick_layer">
									瓦工 <b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">
									<input class="form-control" autocomplete="off" lay-verify="brick_layer" name="installation[brick_layer]" id="brick_layer" placeholder="位" type="text">
								</div>
							</div>
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10" for="Oiler">
									油工 <b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">
									<input class="form-control" autocomplete="off" lay-verify="Oiler"  id="Oiler" name="installation[oiler]" placeholder="位" type="text" >
								</div>
							</div>
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10" for="hamal">
									搬运工<b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">											<input autocomplete="off" class="form-control" name="installation[hamal]" lay-verify="hamal"  id="hamal" placeholder="位" type="text">
								</div>
							</div>
							<div class="col-sm-4 col-xs-6">
								<label class="col-md-4 mt-10" for="reslt">
									其他<b class='text-orange xin'>*</b>
								</label>
								<div class="col-md-8">											<input autocomplete="off" class="form-control" name="installation[reslt]" lay-verify="reslt"  id="reslt" placeholder="位" type="text">
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="border-bottom-1"></div>
				<div class="row k pt-20  pl-20 Increase_the_project_titlemb-10 mt-10">
					<div class="col-md-3 col-xs-12 col-sm-4">
						完工后垃圾处理方式 <b class='text-orange xin'>*</b>
					</div>
					<input type="hidden" lay-verify="cse" id="cse" name="installation[self_trash]" value="">
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input name="self_trash" id="c_shi" lay-filter="c_shi" value="1" type="radio" title="商场处理">商场处理

						</label>
					</div>
					<div class="col-md-2 col-xs-6 col-sm-4">
						<label>
							<input name="self_trash" id="c_fou" type="radio" value="0" lay-filter="c_fou" title="师傅处理">师傅处理
						</label>

					</div>
				</div>
				<div class="row pb-20  pl-20 Increase_the_project_titlemb-10 mt-10">
					<!--商场办证-->
					<div class="col-md-12 col-sm-12 mb-20 pl-20">
						<div class="row">
							<div class="col-md-1 col-sm-3 col-xs-12">
								商场办证 <b class='text-orange xin'>*</b>
							</div>
							<div class="col-md-2 col-sm-3 col-xs-6">
								<label>
									<input value="1" type="radio" id="master_worker"  name="installation[departure_card]" title="师傅代办" checked name="departure_card">&nbsp;&nbsp;师傅代办

								</label>
							</div>
							<div class="col-md-2 col-sm-3 col-xs-6">
								<label>
									<input value="2" type="radio" id="clientele" name="installation[departure_card]" title="客户办理" name="departure_card">&nbsp;&nbsp;客户办理
								</label>
							</div>
							<div class="col-md-2 col-sm-3 col-xs-6">
								<label>
									<input value="3" type="radio" id="do_without" name="installation[departure_card]" title="不需要办证" name="departure_card">&nbsp;&nbsp;不需要办证
								</label>

							</div>
						</div>
					</div>
				</div>
				<div class="border-bottom-1"></div>
				<div class="row pl-20 upload_module">
					<div class="col-sm-6 col-xs-12">
						<div class="row">
							<div class="col-sm-4 col-xs-12">
								安装进度计划表
							</div>
							<input type="hidden" lay-verify="Up" value="" name="installation[Up]" id="Up" lay-filter="Up">
							<div class="col-sm-4 col-xs-6">
								<!--<input type="file" name="images[]" lay-type="file" lay-type="" value="" id="aaka" class="layui-upload-file">-->
								<a href= "javascript:; "num="1" class="text-blue" id="">上传计划表</a>
							</div>
							<div class="col-sm-4 col-xs-6">
								<a href= "javascript:; "num="0" class="text-blue" id="There_is_no_schedule">无计划表</a>
							</div>
						</div>
					</div>
					<div class="col-sm-6 col-xs-12">
						<div class="row">
							<div class="col-xs-12 col-sm-4">
								安装图纸
							</div>
							<input type="hidden" value="" lay-verify="drawings" name="installation[drawings]" id="drawings" lay-filter="drawings">
							<div class="col-xs-6 col-sm-4">
								<a href= "javascript:;" num="1" class="text-blue">上传图纸</a>
							</div>
							<div class="col-xs-6 col-sm-4">
								<a href= "javascript:;" num="0" class="text-blue">无图纸</a>
							</div>
						</div>
					</div>
					<div class="col-sm-6 col-xs-12">
						<div class="row">
							<div class="col-xs-12 col-sm-4">
								安装验收单
							</div>
							<input type="hidden" autocomplete="off" value=" " lay-verify="check_list" name="installation[check_list]" id="check_list" lay-filter="check_list">
							<div class="col-xs-6 col-sm-4">

								<a href= "javascript:;" num="1" class=" text-blue">上传验收单</a>
							</div>
							<div class="col-xs-6 col-sm-4">
								<a href= "javascript:;" num="0" class=" text-blue">无验收单</a>
							</div>
						</div>
					</div>
				</div>
				<div class="border-bottom-1"></div>
				<div class="row  pt-20 pl-20">
					<!--客户信息-->
					<?php if(empty($_SESSION['think']['id'])): ?>
					<div class="col-md-6">
						<div class="row">
							<label style="float:left;">您还未登录,登录后给您更好的服务</label>
							<div class="col-md-6" id="denglu" style="float:left;">
								<a href="__PUBLIC__auth">登录</a> <b class='text-orange xin'>*</b>
							</div>
						</div>
					</div>
					<!-- 登入后的状态 -->
					<?php else: ?>
					<div class="col-md-6">
						<div class="form-group row">
							<label class="col-md-3 col-xs-5 mt-10">客户ID <b class='text-orange xin'>*</b></label>
							<div class="col-md-6 col-xs-7">
								<input type="text" autocomplete="off" readonly unselectable="on" id="client" name="uid" class="form-control ds-uid" value="<?php echo $_SESSION['think']['id'] ?>">
								<input type="text" style="display:none" id="uname" name="uname" class="form-control ds-uid" value="<?php echo $_SESSION['think']['ds_username'] ?>">
							</div>
						</div>
					</div>
					<?php endif; ?>

					<!--预约开始时间-->
					<div class="col-sm-6">
						<div class="row">
							<label for="input_date" class="col-sm-3 col-xs-5 mt-10">预约开始时间 <b class='text-orange xin'>*</b></label>
							<div class="col-sm-6 col-xs-7">
								<div class="input-append date form_datetime" id="input_date"   data-date="2013-02-21T15:25:00Z">
									<input autocomplete="off" onclick="layui.laydate({elem: this, min: laydate.now(+1)})" size="16" type="text" class="form-control" id="form_datetime" value="" name="installation[start_at]"  lay-verify="date|required">
									<span class="add-on"><i class="icon-remove"></i></span>
									<span class="add-on"><i class="icon-calendar"></i></span>
								</div>
							</div>
						</div>
					</div>

				</div>
				<div class="row pt-20 pl-20">

					<!--联系电话-->
					<div class="col-sm-6 ">
						<div class="form-group row">
							<label class="col-sm-3 mt-10 col-xs-5">联系人电话 <b class='text-orange xin'>*</b></label>
							<div class="col-sm-6 col-xs-7">
								<input type="text" autocomplete="off" name="installation[contact_phone]" lay-verify="phone|required" id="telephone"  class="form-control">
							</div>
						</div>
					</div>
					<!--联系人-->
					<div class="col-sm-6">
						<div class="form-group row">
							<label class="col-sm-3 col-xs-5 mt-10">联系人 <b class='text-orange xin'>*</b></label>
							<div class="col-sm-6 col-xs-7">
								<input type="text" autocomplete="off" name="installation[contact_name]" lay-verify="linkman_contacts|required"  id="linkman_contacts" class="form-control">
							</div>
						</div>
						<div class="row hidden">
							<div class="col-md-10 mt-5 mb-10 text-center text-orange ">
								联系人不能为空
							</div>
						</div>
					</div>
				</div>
				<div class="row pt-20 pl-20">

					<!--目标维修地址-->
					<div class="col-sm-12 col-md-6">
						<div class="form-group row">
							<label class="col-sm-3 col-xs-12 mt-10">目标安装地址 <b class='text-orange xin'>*</b></label>
							<div class="col-sm-8 col-xs-12">
								<div id="" class="row">
									<div class="form-group col-xs-6 col-sm-4">
										<select lay-filter="location_ext"  name="installation[location_ext]" class="form-control" lay-verify="" id="location_ext" >
											<option value="0">054454</option>
										</select>
										<input type='hidden' value="" name="m">
									</div>
									<div class="form-group col-xs-6 col-sm-4">

										<select lay-filter="location_ext1" name="installation[location_exta]" class="form-control" lay-verify="" id="location_ext1">
											<option value="0">0454</option>
											<option value="1">05445</option><option value="2">45324530</option>
										</select>
										<input type='hidden' value="" name="b">
									</div>
									<div class="form-group col-xs-6 col-sm-4">
										<select lay-filter="location_ext2" name="installation[location_extb]" class="form-control" lay-verify="" id="location_ext2" >
											<option value="0">0</option>
											<option value="1">0044554</option>
											<option value="2">05437</option>
										</select>
										<input type='hidden' value="" name="c">
									</div>
								</div>
								<input type="text" autocomplete="off" name="installation[location_extc]" lay-verify="province4|required" id="province4" placeholder="请输入详细地址，精确到街道、门牌号" class="form-control">
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<div class="col-md-2 pl-20">
						<label class="btn btn-default">门头照片</label>
					</div>
					<div class="col-md-6" id="imgPickers">
						<input type="hidden" id="data_photos" name="installation[storefront]">
						<img id="img_datas"  class="mt-0_xs"  src="__PUBLIC__static/index/images/tj.png"/>
					</div>
				</div>
				<div class="border-bottom-1"></div>
				<!--需求-->
				<div class="row pl-20">
					<div class="col-md-12 mt-20">
						<label>
							<input type="checkbox"  value="1"   id="nuclear_list_in_advance">需求待进一步明确，预先核单
						</label>
					</div>
				</div>
				<div class="row pl-20 pt-30">
					<div class="col-md-6 col-sm-4 col-xs-12">
						<label>
							<input type="checkbox"  lay-skin="primary" title="使用平台月结服务"  value="1" name="installation[monthly_service]" id="monthly_service">用平台月结服务
						</label>
					</div>
					<div class="col-md-6 col-xs-12 col-sm-8" >
						<div class="row form-group" >
							<label class="col-md-5  col-xs-12 text-left mt-10"  id="yuejie"></label>
							<div class="col-md-5  col-xs-12 ">
								<input type="password"  name="installation[yue]" placeholder="月结客户使用的密码" disabled lay-verify="required" id="year_service_ordere_pwd" class="form-control">
							</div>
						</div>
						<div class="row hidden ">
							<div class="col-md-10  mt-5 mb-10 text-center text-orange ">
								月结不能为空
							</div>
						</div>
					</div>
				</div>
				<div class="row pl-20 pb-30">
					<div class="col-sm-3" style="color: #000000;">
						注： <b class='text-orange xin'>*</b> 表示必填项
					</div>
				</div>
				<div class="border-bottom-1"></div>
				<div class="row pb-20 pl-10">
					<div class="col-md-3 col-sm-4 col-xs-6 col-sm-offset-1 text-center mt-20">
						<button id="xiandan" lay-submit="" lay-filter="demo1" class="btn btn-success form-control border-radius ">直接下单</button>
					</div>
					<input type="hidden" id="step_type" value="" name="step_type">
					<div class="col-md-3 col-md-offset-4  col-sm-4 col-xs-6 text-center mt-20">
						<input type="submit"  id="quick_consulting" class="btn btn-blue form-control border-radius " value="快捷咨询">
					</div>
				</div>
				<div class="border-bottom-1"></div>
				
			</div>
		</div>
	</div>
</form>
<script>
    $("#xiandan").click(function () {
        $("#step_type").val(1)
    });
    $("#quick_consulting").click(function () {
        $("#step_type").val(2)
    })
	
	 $("#xiandan").click(function () {
            $("#ds-sub").val(1);
        })
        $("#quick_consulting").click(function () {
            $("#ds-sub").val(2);
        });
        
</script>
<script type="text/javascript" src="__PUBLIC__static/admin/webupload/webuploader.min.js"></script>
<script src="__CITY__/distpicker.data.js"></script>
<script src="__CITY__/distpicker.js"></script>
<script src="__CITY__/main.js"></script>



{include file="public/footer" }
<div id="de" style="opacity: 1;position: absolute;top:  10px;height: 0;overflow: hidden" class="">

	<img id="img_data" height="100px"  class="mt-0_xs" style="float:left;margin-left: 50px;margin-top: -10px;" src="__PUBLIC__static/admin/images/no_img.jpg"/>

	<div id="fileList" class="uploader-list" style="float:right">
	</div>
	<div id="imgPicker" class="mb-10" style="float:left;margin-left:5%;margin-top:3%">
		<i class="glyphicon glyphicon-plus"></i>上传计划表
	</div>
</div>
<div id="de1"  style="opacity: 1;position: absolute;top:  10px;height: 0;overflow: hidden" class="">


	<img id="img_data1" height="100px"  class="mt-0_xs" style="float:left;margin-left: 50px;margin-top: -10px;" src="__PUBLIC__static/admin/images/no_img.jpg"/>
	<div id="fileList1" class="uploader-list" style="float:right">
	</div>
	<div id="imgPicker1" class="mb-10" style="float:left;margin-left:5%;margin-top:3%">
		<i class="glyphicon glyphicon-plus"></i>上传图纸
	</div>
</div>
<div id="de2" style="opacity: 1;position: absolute;top:10px;height: 0;overflow: hidden" class="">


	<img id="img_data2" height="100px"  class="mt-0_xs" style="float:left;margin-left: 50px;margin-top: -10px;" src="__PUBLIC__static/admin/images/no_img.jpg"/>
	<div id="fileList2" class="uploader-list" style="float:right">
	</div>
	<div id="imgPicker2" class="mb-10" style="float:left;margin-left:5%;margin-top:3%">
		<i class="glyphicon glyphicon-plus"></i>上传验收单
	</div>
</div>
<script>
    var uploader = WebUploader.create({
        auto: true,// 选完文件后，是否自动上传。
        swf: '__PUBLIC__static/admin/webupload/Uploader.swf',// swf文件路径
        server: "{:url('__PUBLIC__/admin/Uploads/uploadface')}",// 文件接收服务端。
        duplicate :true,// 重复上传图片，true为可重复false为不可重复
        pick: '#imgPickers',// 选择文件的按钮。可选。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/jpg,image/jpeg,image/png'
        },
        'onUploadSuccess': function(file, data, response) {
            $("#data_photos").val(data._raw);
            $("#img_datas").attr('src', '__TUN__/face/' + data._raw).show();
        }
    });
</script>
<script>

    var na=0;
    $(".k").on("change","input[type='radio']",function () {

        $(this).parent().parent().siblings("input[type='hidden']").val($(this).val());
        if($(this).attr("title")==="全包模式"){
            $(".B").hide();
            na=1;
        }else if($(this).attr("title")==="协助模式"){
            $(".B").show();
            na=2;
        }
    });
    $(function () {
        var nua=1;
        var m=0;
        $("#pre_trans").change(function () {
            if ($(this).prop("checked")){
                $(this).val(1)
                $("#province").prop("disabled",false);
                $("#dizhi").prop("disabled",false);
                $("#city").prop("disabled",false);
                $("#district").prop("disabled",false);
                nua=1;
            } else {
                $("#province").prop("disabled",true);
                $("#dizhi").prop("disabled",true);
                $("#city").prop("disabled",true);
                $("#district").prop("disabled",true);
                nua=0;
                $(this).val(0)
            }
        })
        $("#pre_survey").change(function () {
            if ($(this).prop("checked")){
                $(this).val(1)
                $("#there_is_a_pre_survey").prop("disabled",false);
                m=1;
            } else {
                $("#there_is_a_pre_survey").prop("disabled",true);
                m=0;
                $(this).val(0)
            }
        });
        var s
        $("#monthly_service").change(function () {
            if ($(this).prop("checked")){
                $(this).val(1)
                $("#year_service_ordere_pwd").prop("disabled",false);
                s=1;
            } else {
                $("#year_service_ordere_pwd").prop("disabled",true);
                s=0;
                $(this).val(0)
            }
        })
        var layer=layui.layer;

        $(document).ready(function() {
            $('#demoa').ajaxForm({
                success: complete, // 这是提交后的方法
                dataType: 'json',
                beforeSubmit:function () {

                    if( '' == $.trim($('#product_categories').val())){
                        layer.msg('请填写商品大类一类',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#product_categories1').val())){
                        layer.msg('请填写商品大类二类',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#product_categories2').val())){
                        layer.msg('请填写商品大类三类',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if(nua==1){
                        if( '' == $.trim($('#province').val())){
                            layer.msg('提货地址省',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#city').val())){
                            layer.msg('提货地址市',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#district').val())){
                            layer.msg('提货地址区',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#dizhi').val())){
                            layer.msg('提货地址详细地址',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                    }

                    if(m==1){
                        if( '' == $.trim($('#there_is_a_pre_survey').val())){
                            layer.msg('勘测单号不能为空',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                    }
                    if(na==2){
                        if( '' == $.trim($('#woodworking').val())){
                            layer.msg('木工不能为空',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#electrician').val())){
                            layer.msg('电工',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#brick_layer').val())){
                            layer.msg('瓦工',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#Oiler').val())){
                            layer.msg('油工',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                        if( '' == $.trim($('#hamal').val())){
                            layer.msg('搬运工',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                    }

                    if( '' == $.trim($('#ase').val())){
                        layer.msg('安装模式',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#lse').val())){
                        layer.msg('物流提货',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#sse').val())){
                        layer.msg('是否需要师傅自带板车',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#yse').val())){
                        layer.msg('是否需要师傅代缴工程押金',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#cse').val())){
                        layer.msg('完工后垃圾处理方式',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#Up').val())){
                        layer.msg('安装进度计划表',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#drawings').val())){
                        layer.msg('安装图纸',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#check_list').val())){
                        layer.msg('上传验收单',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#form_datetime').val())){
                        layer.msg('预约时间',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#brand').val())){
                        layer.msg('品牌',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#form_datetime').val())){
                        layer.msg('联系人',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#telephone').val())){
                        layer.msg('联系人电话',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#location_ext').val())){
                        layer.msg('安装地址省',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#location_ext1').val())){
                        layer.msg('安装地址市',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#location_ext2').val())){
                        layer.msg('安装地址区',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if( '' == $.trim($('#province4').val())){
                        layer.msg('安装地址详细地址',{icon:2,time:1500,shade: 0.1}, function(index){
                            layer.close(index);
                        });
                        return false;
                    }
                    if(s==1){
                        if( '' == $.trim($('#year_service_ordere_pwd').val())){
                            layer.msg('月结密码',{icon:2,time:1500,shade: 0.1}, function(index){
                                layer.close(index);
                            });
                            return false;
                        }
                    }

                }
            });
            function complete(data){
                var jump=null;
                if(data.code===-1){
                    layer.open({
                        type: 1,
                        area:["300px","200px"],
                        time:"1s",
                        content: $("#denglu") //这里content是一个普通的String
                    });
                }else if(data.code===1){
                    layer.msg('下单成功',{icon:1,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                    var jump=data.src;
                    if(data.step_type==2){
                        window.location.href="__PUBLIC__choose_wid/"+jump+"/wid/0";
                    }else{
                        window.location.href="__PUBLIC__install_jilt_single/"+jump;
                    }

//
                }else if(data.code===0){

                    layer.msg('你还不是月结客户',{icon:2,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                }else if(data.code===3){

                    layer.msg('月结密码错误',{icon:2,time:1500,shade: 0.1}, function(index){
                        layer.close(index);
                    });
                }

            }
        });
    })




</script>
<script>
    var ada=ChineseDistricts["86"];
    var htl='<option value="0">--省--</option>';
    for(var key in ada){
        htl+='<option value="'+key+'">'+ada[key]+'</option>';
    }
    $("#province").html(htl);
    $("#location_ext").html(htl);
    var bba=ChineseDistricts["110000"];
    var htl='<option value="0">--市--</option>';
    $("#city").html(htl);
    $("#location_ext1").html(htl);
    var htl='<option value="0">--区--</option>';
    $("#district").html(htl);
    $("#location_ext2").html(htl);
    $(".upload_module").on("click","a",function (e) {
        e.preventDefault();
        var this_=$(this);
        this_.css("border-color","red");
        this_.parent().siblings("input[type='hidden']").val(this_.attr('num'));
        this_.parent().siblings("div").find("a").css("border-color","#00a0e9");
        var layer=layui.layer;
        var hr=$(this).attr('href');
        if(this_.text()=="上传计划表"){
            $("#de").height("150px");
            layer.open({
                type:1,
                area:["300px","300px"],
                content:$("#de"),
                time:"20000",
                cancel:function (idnex) {
                    $("#de").height("0px");
                }
            });
        }else if(this_.text()=="上传图纸"){
            $("#de1").height("150px");
            layer.open({
                type:1,
                area:["300px","300px"],
                content:$("#de1"),
                time:"20000",
                cancel:function (idnex) {
                    $("#de1").height("0px");
                }
            });
        }else if(this_.text()=="上传验收单"){
            $("#de2").height("150px");
            layer.open({
                type:1,
                area:["300px","300px"],
                content:$("#de2"),
                time:"20000",
                cancel:function (idnex) {
                    $("#de2").height("0px");
                }
            });
        }


    });
    var uploader = WebUploader.create({
        auto: true,// 选完文件后，是否自动上传。
        swf: '__PUBLIC__static/admin/webupload/Uploader.swf',// swf文件路径
        server: "{:url('__PUBLIC__/admin/Uploads/uploadface')}",// 文件接收服务端。
        duplicate :true,// 重复上传图片，true为可重复false为不可重复
        pick: '#imgPicker',// 选择文件的按钮。可选。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/jpg,image/jpeg,image/png'
        },
        'onUploadSuccess': function(file, data, response) {
            $("#Up").val(data._raw);
            $("#img_data").attr('src', '__TUN__/face/' + data._raw).show();
        }
    });
    var uploader1= WebUploader.create({
        auto: true,// 选完文件后，是否自动上传。
        swf: '__PUBLIC__static/admin/webupload/Uploader.swf',// swf文件路径
        server: "{:url('__PUBLIC__/admin/Uploads/uploadface')}",// 文件接收服务端。
        duplicate :true,// 重复上传图片，true为可重复false为不可重复
        pick: '#imgPicker1',// 选择文件的按钮。可选。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/jpg,image/jpeg,image/png'
        },
        'onUploadSuccess': function(file, data, response) {
            $("#drawings").val(data._raw);
            $("#img_data1").attr('src', '__TUN__/face/' + data._raw).show();
        }
    });
    var uploader2 = WebUploader.create({
        auto: true,// 选完文件后，是否自动上传。
        swf: '__PUBLIC__static/admin/webupload/Uploader.swf',// swf文件路径
        server: "{:url('__PUBLIC__/admin/Uploads/uploadface')}",// 文件接收服务端。
        duplicate :true,// 重复上传图片，true为可重复false为不可重复
        pick: '#imgPicker2',// 选择文件的按钮。可选。
        accept: {
            title: 'Images',
            extensions: 'gif,jpg,jpeg,bmp,png',
            mimeTypes: 'image/jpg,image/jpeg,image/png'
        },
        'onUploadSuccess': function(file, data, response) {
            $("#check_list").val(data._raw);
            $("#img_data2").attr('src', '__TUN__/face/' + data._raw).show();
        }
    });
    $("#product_categories").change(function () {
        var value=$(this).val();
        var ms = $("#product_categories1").val();
        aad(ms,'product_categories2',"threedefault");
        aad(value,'product_categories1',"twostclass");
    });
    $("#product_categories1").change(function () {
        var value=$(this).val();

        aad(value,'product_categories2',"threedefault");
    });
    $("#province").change(function () {
        var value=$(this).val();
        fa(value,"city",'市');
        $("#district").html("<option value='0'>--区--</option>")
    });
    $("#city").change(function () {
        var value=$(this).val();
        fa(value,"district",'区');
    });
    $("#location_ext").change(function () {
        $(this).siblings("input").val($(this).val());
        var value=$(this).val();
        fa(value,"location_ext1",'市');
        $("#location_ext2").html("<option value='0'>--区--</option>");
        try{
            $(this).siblings("input").val();
            var v=$(this).val();
            var k= $("#location_ext").val();
            var ada=ChineseDistricts['86'];
            $(this).siblings("input").val(ada[v]);
        }catch (da){

        }
    });
    $("#location_ext1").change(function () {
        var value=$(this).val();
        fa(value,"location_ext2",'区');
        try{
            $(this).siblings("input").val();
            var v=$(this).val();
            var k= $("#location_ext").val();
            var ada=ChineseDistricts[k];
            $(this).siblings("input").val(ada[v]);
        }catch (da){

        }
    });
    $("#location_ext2").change(function () {

        try{
            $(this).siblings("input").val();
            var v=$(this).val();
            var k= $("#location_ext1").val();
            var ada=ChineseDistricts[k];
            $(this).siblings("input").val(ada[v]);
        }catch (da){

        }

    });
    var fa=function (value,select,k) {
        var ada=ChineseDistricts[value];
        var htl='<option value="0">--'+k+'--</option>';
        for(var key in ada){
            htl+='<option value="'+key+'">'+ada[key]+'</option>';
        }

        $("#"+select).html(htl);
    }
    var aad=function (value,select,url) {
        $.ajax({
            type:"GET",
            data:{bigname:value},
            dataType:'json',
            url:"__PUBLIC__installation/"+url,
            success:function (data) {
                var option='';
                $.each(data,function(index,array){
                    option+= "<option value='"+array['id']+"'>"+array['name']+"</option>";

                });
                $("#"+select).html(option);
            }
        });
    }
</script>
